[pytest]
# Test file patterns
python_files = test_*.py
python_classes = Test*
python_functions = test_*

# Configure asyncio mode for async tests
asyncio_mode = auto

# Test paths to include
testpaths = tests

# Register custom markers
markers = 
    integration: marks tests that need a real PostgreSQL database
    unit: marks tests that can run with SQLite

# Configure test coverage settings
[coverage:run]
source = app
omit = 
    */migrations/*
    */tests/*
    */__init__.py

# Pytest coverage options
addopts = 
    --verbose
    --strict-markers
    -ra
    --tb=short
    --cov=app
    --cov-report=term-missing
    --cov-report=html
    --no-cov-on-fail

# Environment variables for testing
env =
    TESTING=True
    DATABASE_URL=sqlite:///:memory: